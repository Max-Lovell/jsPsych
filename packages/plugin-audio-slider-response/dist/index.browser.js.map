{"version":3,"file":"index.browser.js","sources":["../../../node_modules/auto-bind/index.js","../src/index.ts"],"sourcesContent":["'use strict';\n\n// Gets all non-builtin properties up the prototype chain\nconst getAllProperties = object => {\n\tconst properties = new Set();\n\n\tdo {\n\t\tfor (const key of Reflect.ownKeys(object)) {\n\t\t\tproperties.add([object, key]);\n\t\t}\n\t} while ((object = Reflect.getPrototypeOf(object)) && object !== Object.prototype);\n\n\treturn properties;\n};\n\nmodule.exports = (self, {include, exclude} = {}) => {\n\tconst filter = key => {\n\t\tconst match = pattern => typeof pattern === 'string' ? key === pattern : pattern.test(key);\n\n\t\tif (include) {\n\t\t\treturn include.some(match);\n\t\t}\n\n\t\tif (exclude) {\n\t\t\treturn !exclude.some(match);\n\t\t}\n\n\t\treturn true;\n\t};\n\n\tfor (const [object, key] of getAllProperties(self.constructor.prototype)) {\n\t\tif (key === 'constructor' || !filter(key)) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tconst descriptor = Reflect.getOwnPropertyDescriptor(object, key);\n\t\tif (descriptor && typeof descriptor.value === 'function') {\n\t\t\tself[key] = self[key].bind(self);\n\t\t}\n\t}\n\n\treturn self;\n};\n","import autoBind from \"auto-bind\";\nimport { JsPsych, JsPsychPlugin, ParameterType, TrialType } from \"jspsych\";\n\nimport { AudioPlayerInterface } from \"../../jspsych/src/modules/plugin-api/AudioPlayer\";\nimport { version } from \"../package.json\";\n\nconst info = <const>{\n  name: \"audio-slider-response\",\n  version: version,\n  parameters: {\n    /** Audio file to be played. */\n    stimulus: {\n      type: ParameterType.AUDIO,\n      default: undefined,\n    },\n    /** Sets the minimum value of the slider. */\n    min: {\n      type: ParameterType.INT,\n      default: 0,\n    },\n    /** Sets the maximum value of the slider */\n    max: {\n      type: ParameterType.INT,\n      default: 100,\n    },\n    /** Sets the starting value of the slider */\n    slider_start: {\n      type: ParameterType.INT,\n      default: 50,\n    },\n    /** Sets the step of the slider. This is the smallest amount by which the slider can change. */\n    step: {\n      type: ParameterType.INT,\n      default: 1,\n    },\n    /** Labels displayed at equidistant locations on the slider. For example, two labels will be placed at the ends of the\n     * slider. Three labels would place two at the ends and one in the middle. Four will place two at the ends, and the\n     * other two will be at 33% and 67% of the slider width.\n     */\n    labels: {\n      type: ParameterType.HTML_STRING,\n      default: [],\n      array: true,\n    },\n    /** Set the width of the slider in pixels. If left null, then the width will be equal to the widest element in the display. */\n    slider_width: {\n      type: ParameterType.INT,\n      default: null,\n    },\n    /** Label of the button to end the trial. */\n    button_label: {\n      type: ParameterType.STRING,\n      default: \"Continue\",\n      array: false,\n    },\n    /** If true, the participant must move the slider before clicking the continue button. */\n    require_movement: {\n      type: ParameterType.BOOL,\n      default: false,\n    },\n    /** This string can contain HTML markup. Any content here will be displayed below the stimulus. The intention is\n     * that it can be used to provide a reminder about the action the participant is supposed to take (e.g., which key to press).\n     */\n    prompt: {\n      type: ParameterType.HTML_STRING,\n      default: null,\n    },\n    /** How long to wait for the participant to make a response before ending the trial in milliseconds. If\n     * the participant fails to make a response before this timer is reached, the participant's response will be\n     * recorded as null for the trial and the trial will end. If the value of this parameter is null, then the trial\n     * will wait for a response indefinitely.\n     */\n    trial_duration: {\n      type: ParameterType.INT,\n      default: null,\n    },\n    /** If true, then the trial will end whenever the participant makes a response (assuming they make their response\n     * before the cutoff specified by the `trial_duration` parameter). If false, then the trial will continue until the\n     * value for `trial_duration` is reached. You can set this parameter to `false` to force the participant to listen to\n     * the stimulus for a fixed amount of time, even if they respond before the time is complete.\n     */\n    response_ends_trial: {\n      type: ParameterType.BOOL,\n      default: true,\n    },\n    /** If true, then the trial will end as soon as the audio file finishes playing. */\n    trial_ends_after_audio: {\n      type: ParameterType.BOOL,\n      default: false,\n    },\n    /** If true, then responses are allowed while the audio is playing. If false, then the audio must finish playing before\n     * the slider is enabled and the trial can end via the next button click. Once the audio has played all the way through,\n     * the slider is enabled and a response is allowed (including while the audio is being re-played via on-screen playback controls).\n     */\n    response_allowed_while_playing: {\n      type: ParameterType.BOOL,\n      default: true,\n    },\n  },\n  data: {\n    /** The numeric value of the slider. */\n    response: {\n      type: ParameterType.INT,\n    },\n    /** The time in milliseconds for the participant to make a response. The time is measured from when the stimulus first\n     * began playing until the participant's response.\n     */\n    rt: {\n      type: ParameterType.INT,\n    },\n    /** The path of the audio file that was played. */\n    stimulus: {\n      type: ParameterType.STRING,\n    },\n    /** The starting value of the slider. */\n    slider_start: {\n      type: ParameterType.INT,\n    },\n  },\n};\n\ntype Info = typeof info;\n\n/**\n * This plugin plays an audio file and allows the participant to respond by dragging a slider.\n *\n * If the browser supports it, audio files are played using the WebAudio API. This allows for reasonably precise timing of the\n * playback. The timing of responses generated is measured against the WebAudio specific clock, improving the measurement of\n * response times. If the browser does not support the WebAudio API, then the audio file is played with HTML5 audio.\n *\n * Audio files can be automatically preloaded by jsPsych using the [`preload` plugin](preload.md). However, if you are using\n * timeline variables or another dynamic method to specify the audio stimulus, then you will need\n * to [manually preload](../overview/media-preloading.md#manual-preloading) the audio.\n *\n * The trial can end when the participant responds, or if the participant has failed to respond within a fixed length of time. You can also prevent the slider response from being made before the audio has finished playing.\n * @author Josh de Leeuw\n * @see {@link https://www.jspsych.org/latest/plugins/audio-slider-response/ audio-slider-response plugin documentation on jspsych.org}\n */\nclass AudioSliderResponsePlugin implements JsPsychPlugin<Info> {\n  static info = info;\n  private audio: AudioPlayerInterface;\n  private context: AudioContext;\n  private params: TrialType<Info>;\n  private display: HTMLElement;\n  private response: { rt: number; response: number } = { rt: null, response: null };\n  private startTime: number;\n  private half_thumb_width: number;\n  private trial_complete: (trial_data: {\n    rt: number;\n    slider_start: number;\n    response: number;\n  }) => void;\n\n  constructor(private jsPsych: JsPsych) {\n    autoBind(this);\n  }\n\n  async trial(display_element: HTMLElement, trial: TrialType<Info>, on_load: () => void) {\n    this.params = trial;\n    this.display = display_element;\n    // for storing data related to response\n    this.response;\n    // half of the thumb width value from jspsych.css, used to adjust the label positions\n    this.half_thumb_width = 7.5;\n    // hold the .resolve() function from the Promise that ends the trial\n    this.trial_complete;\n\n    // setup stimulus\n    this.context = this.jsPsych.pluginAPI.audioContext();\n\n    // load audio file\n    this.audio = await this.jsPsych.pluginAPI.getAudioPlayer(trial.stimulus);\n\n    this.setupTrial();\n\n    on_load();\n\n    return new Promise((resolve) => {\n      this.trial_complete = resolve;\n    });\n  }\n\n  // to enable slider after audio ends\n  private enable_slider() {\n    document.querySelector<HTMLInputElement>(\"#jspsych-audio-slider-response-response\").disabled =\n      false;\n    if (!this.params.require_movement) {\n      document.querySelector<HTMLButtonElement>(\"#jspsych-audio-slider-response-next\").disabled =\n        false;\n    }\n  }\n\n  private setupTrial = () => {\n    // set up end event if trial needs it\n    if (this.params.trial_ends_after_audio) {\n      this.audio.addEventListener(\"ended\", this.end_trial);\n    }\n\n    // enable slider after audio ends if necessary\n    if (!this.params.response_allowed_while_playing && !this.params.trial_ends_after_audio) {\n      this.audio.addEventListener(\"ended\", this.enable_slider);\n    }\n\n    var html = '<div id=\"jspsych-audio-slider-response-wrapper\" style=\"margin: 100px 0px;\">';\n    html +=\n      '<div class=\"jspsych-audio-slider-response-container\" style=\"position:relative; margin: 0 auto 3em auto; width:';\n    if (this.params.slider_width !== null) {\n      html += this.params.slider_width + \"px;\";\n    } else {\n      html += \"auto;\";\n    }\n    html += '\">';\n    html +=\n      '<input type=\"range\" class=\"jspsych-slider\" value=\"' +\n      this.params.slider_start +\n      '\" min=\"' +\n      this.params.min +\n      '\" max=\"' +\n      this.params.max +\n      '\" step=\"' +\n      this.params.step +\n      '\" id=\"jspsych-audio-slider-response-response\"';\n    if (!this.params.response_allowed_while_playing) {\n      html += \" disabled\";\n    }\n    html += \"></input><div>\";\n    for (var j = 0; j < this.params.labels.length; j++) {\n      var label_width_perc = 100 / (this.params.labels.length - 1);\n      var percent_of_range = j * (100 / (this.params.labels.length - 1));\n      var percent_dist_from_center = ((percent_of_range - 50) / 50) * 100;\n      var offset = (percent_dist_from_center * this.half_thumb_width) / 100;\n      html +=\n        '<div style=\"border: 1px solid transparent; display: inline-block; position: absolute; ' +\n        \"left:calc(\" +\n        percent_of_range +\n        \"% - (\" +\n        label_width_perc +\n        \"% / 2) - \" +\n        offset +\n        \"px); text-align: center; width: \" +\n        label_width_perc +\n        '%;\">';\n      html +=\n        '<span style=\"text-align: center; font-size: 80%;\">' + this.params.labels[j] + \"</span>\";\n      html += \"</div>\";\n    }\n    html += \"</div>\";\n    html += \"</div>\";\n    html += \"</div>\";\n\n    if (this.params.prompt !== null) {\n      html += this.params.prompt;\n    }\n\n    // add submit button\n    var next_disabled_attribute = \"\";\n    if (this.params.require_movement || !this.params.response_allowed_while_playing) {\n      next_disabled_attribute = \"disabled\";\n    }\n    html +=\n      '<button id=\"jspsych-audio-slider-response-next\" class=\"jspsych-btn\" ' +\n      next_disabled_attribute +\n      \">\" +\n      this.params.button_label +\n      \"</button>\";\n\n    this.display.innerHTML = html;\n\n    this.response = {\n      rt: null,\n      response: null,\n    };\n\n    if (!this.params.response_allowed_while_playing) {\n      this.display.querySelector<HTMLInputElement>(\n        \"#jspsych-audio-slider-response-response\"\n      ).disabled = true;\n      this.display.querySelector<HTMLInputElement>(\"#jspsych-audio-slider-response-next\").disabled =\n        true;\n    }\n\n    if (this.params.require_movement) {\n      const enable_button = () => {\n        this.display.querySelector<HTMLInputElement>(\n          \"#jspsych-audio-slider-response-next\"\n        ).disabled = false;\n      };\n\n      this.display\n        .querySelector(\"#jspsych-audio-slider-response-response\")\n        .addEventListener(\"mousedown\", enable_button);\n\n      this.display\n        .querySelector(\"#jspsych-audio-slider-response-response\")\n        .addEventListener(\"touchstart\", enable_button);\n\n      this.display\n        .querySelector(\"#jspsych-audio-slider-response-response\")\n        .addEventListener(\"change\", enable_button);\n    }\n\n    this.display\n      .querySelector(\"#jspsych-audio-slider-response-next\")\n      .addEventListener(\"click\", () => {\n        // measure response time\n        var endTime = performance.now();\n        var rt = Math.round(endTime - this.startTime);\n        if (this.context !== null) {\n          endTime = this.context.currentTime;\n          rt = Math.round((endTime - this.startTime) * 1000);\n        }\n        this.response.rt = rt;\n        this.response.response = this.display.querySelector<HTMLInputElement>(\n          \"#jspsych-audio-slider-response-response\"\n        ).valueAsNumber;\n\n        if (this.params.response_ends_trial) {\n          this.end_trial();\n        } else {\n          this.display.querySelector<HTMLInputElement>(\n            \"#jspsych-audio-slider-response-next\"\n          ).disabled = true;\n        }\n      });\n\n    //record start time\n    this.startTime = performance.now();\n    // record webaudio context start time\n    if (this.context !== null) {\n      this.startTime = this.context.currentTime;\n    }\n\n    // start audio\n    this.audio.play();\n\n    // end trial if trial_duration is set\n    if (this.params.trial_duration !== null) {\n      this.jsPsych.pluginAPI.setTimeout(() => {\n        this.end_trial();\n      }, this.params.trial_duration);\n    }\n  };\n\n  private end_trial = () => {\n    // kill any remaining setTimeout handlers\n    this.jsPsych.pluginAPI.clearAllTimeouts();\n\n    // stop the audio file if it is playing\n    this.audio.stop();\n\n    // remove end event listeners if they exist\n    this.audio.removeEventListener(\"ended\", this.end_trial);\n    this.audio.removeEventListener(\"ended\", this.enable_slider);\n\n    // save data\n    var trialdata = {\n      rt: this.response.rt,\n      stimulus: this.params.stimulus,\n      slider_start: this.params.slider_start,\n      response: this.response.response,\n    };\n\n    this.display.innerHTML = \"\";\n\n    // next trial\n    this.trial_complete(trialdata);\n  };\n\n  simulate(\n    trial: TrialType<Info>,\n    simulation_mode,\n    simulation_options: any,\n    load_callback: () => void\n  ) {\n    if (simulation_mode == \"data-only\") {\n      load_callback();\n      this.simulate_data_only(trial, simulation_options);\n    }\n    if (simulation_mode == \"visual\") {\n      this.simulate_visual(trial, simulation_options, load_callback);\n    }\n  }\n\n  private create_simulation_data(trial: TrialType<Info>, simulation_options) {\n    const default_data = {\n      stimulus: trial.stimulus,\n      slider_start: trial.slider_start,\n      response: this.jsPsych.randomization.randomInt(trial.min, trial.max),\n      rt: this.jsPsych.randomization.sampleExGaussian(500, 50, 1 / 150, true),\n    };\n\n    const data = this.jsPsych.pluginAPI.mergeSimulationData(default_data, simulation_options);\n\n    this.jsPsych.pluginAPI.ensureSimulationDataConsistency(trial, data);\n\n    return data;\n  }\n\n  private simulate_data_only(trial: TrialType<Info>, simulation_options) {\n    const data = this.create_simulation_data(trial, simulation_options);\n\n    this.jsPsych.finishTrial(data);\n  }\n\n  private simulate_visual(trial: TrialType<Info>, simulation_options, load_callback: () => void) {\n    const data = this.create_simulation_data(trial, simulation_options);\n\n    const display_element = this.jsPsych.getDisplayElement();\n\n    const respond = () => {\n      if (data.rt !== null) {\n        const el = display_element.querySelector<HTMLInputElement>(\"input[type='range']\");\n\n        setTimeout(() => {\n          this.jsPsych.pluginAPI.clickTarget(el);\n          el.valueAsNumber = data.response;\n        }, data.rt / 2);\n\n        this.jsPsych.pluginAPI.clickTarget(display_element.querySelector(\"button\"), data.rt);\n      }\n    };\n\n    this.trial(display_element, trial, () => {\n      load_callback();\n\n      if (!trial.response_allowed_while_playing) {\n        this.audio.addEventListener(\"ended\", respond);\n      } else {\n        respond();\n      }\n    });\n  }\n}\n\nexport default AudioSliderResponsePlugin;\n"],"names":["version","ParameterType","autoBind"],"mappings":"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"}